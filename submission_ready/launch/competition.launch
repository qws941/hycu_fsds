<?xml version="1.0" encoding="UTF-8"?>
<!--
  FSDS Competition Driver Launch File
  
  Loads driver parameters from YAML and runs the modular competition driver.
  
  Usage:
    roslaunch fsds_scripts competition.launch
    roslaunch fsds_scripts competition.launch max_speed:=8.0
-->
<launch>
  <!-- Arguments with defaults (can be overridden via command line) -->
  <arg name="max_speed" default="6.0" doc="Maximum speed in m/s"/>
  <arg name="max_throttle" default="0.25" doc="Maximum throttle value"/>
  <arg name="lookahead_base" default="4.0" doc="Pure Pursuit lookahead distance in meters"/>
  
  <!-- Load driver parameters from YAML -->
  <rosparam file="$(find fsds_scripts)/config/driver_params.yaml" 
            command="load" 
            ns="competition_driver"/>
  
  <!-- Override specific params from command line args -->
  <param name="competition_driver/max_speed" value="$(arg max_speed)"/>
  <param name="competition_driver/max_throttle" value="$(arg max_throttle)"/>
  <param name="competition_driver/lookahead_base" value="$(arg lookahead_base)"/>
  
  <!-- Run the modular competition driver -->
  <node pkg="fsds_scripts" 
        type="competition.py" 
        name="competition_driver" 
        output="screen"
        required="true">
    <!-- Remap topics if needed -->
    <!-- <remap from="/fsds/lidar/Lidar1" to="/lidar"/> -->
  </node>
</launch>
